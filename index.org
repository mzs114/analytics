#+TITLE:     Building a basic page to display the analytics of Virtual Labs
#+AUTHOR:    M.S.Soumya
#+DATE:      2015-06-09 Tue

*NOTE:* This document is not yet complete though it is committed ! It
is being worked on continuously.

* Problem
  The analytics of Virtual-labs are currently generated by
  awstats. Awstats provides a dashboard for viewing these
  statistics. A simple dashboard which displays the total views and
  hits of the site is required. This would help keep us informed on
  the usage of our labs.

* Objective
  The objective of this exercise is to display the usage of
  virtual-labs in terms of visits and number of pages viewed on a web
  page. 

* Plan

  #+CAPTION:  Design diagram
  #+LABEL:  Design diagram
  [[./analytics.png]]
 
  To build a web service (at VLEAD) which would extract certain
  specific information from the statistics generated by awstats. This
  service would have a URL which would be hyperlinked to a button on
  the vlab.co.in page.  On clicking the button the scripts in the
  service would get invoked and the information displayed on the
  page. This would be a dynamic process and any changes in the
  statistics must be subsumed by the service.

  Awstats generates parsed text files which contain the statistics in
  text format. The required data from these text files needs to be
  extracted and displayed in a html page.

* Implementation
** Present scenario of statistics
  Currently the labs are hosted in 3 different locations namely:
  + AWS
  + Containers at VLEAD
  + vlab.co.in (either by Amrita or individual institutes)
  The statistics of AWS and labs on containers at VLEAD can be
  obtained (beacause their log are available).  

  The statistics of the labs hosted on AWS can be obtained beacause
  Awstats was configured and the statistics file are generated
  timely. The containers in our machine can also be 

** Process for implementation  
  After a discussion (which also involved exchange of mails) the
  process of implementation was decided as follows:
  - A python script would extract the required data from the awstats
    text files.
  - This extracted data would be stored in the form of well formatted
    json files.
  - These json files should contain the fields required to be
    displayed on the html page. 
  - A javascript script would extract the data from the json files and
    display it on the html page.

   
* Work Plan
** TODO Prepare the document
** TODO Discuss on how to meet the requirement
   
** TODO Figure out the various location of the labs
   There are several locations the labs are situated AWS, deploy,
   separate containers. How to display the combined output of all the
   labs is yet to be decided.
** TODO Build the scripts
** TODO Test the scripts.
** TODO Send the url to Amrita to update on vlab.co.in
   They need to create a hyperlink on their landing page which needs
   to link to this url.
** TODO Include the url in analytics.virtual-labs.ac.in
** TODO Update the analytics.virtual-labs.ac.in 
   The current list of labs (as per their location) is not updated on
   analytics.virtual-labs. This needs to be updated.
